<mat-card class="header-card">
  <h2>Listado de Empresas</h2>
  <div class="filters-inline">
    <span class="filters-label">Sector:</span>
    <div class="toggle-group">
      @for (s of sectores; track s) {
        <button mat-button
                [class.active]="selectedSector === s"
                (click)="selectSector(s)">
          {{ s }}
        </button>
      }
      <button mat-button [class.active]="!selectedSector" (click)="selectSector(null)">
        Todos
      </button>
    </div>

    <span class="filters-label">Pa√≠s:</span>
    <div class="toggle-group">
      @for (p of paises; track p) {
        <button mat-button
                [class.active]="selectedPais === p"
                (click)="selectPais(p)">
          {{ p }}
        </button>
      }
      <button mat-button [class.active]="!selectedPais" (click)="selectPais(null)">
        Todos
      </button>
    </div>
  </div>
</mat-card>

@if (!empresas.length) {
  <div class="loading-container">
    <mat-progress-spinner mode="indeterminate" diameter="60"></mat-progress-spinner>
    <p>Cargando empresas...</p>
  </div>
} @else {
  <div class="empresas-grid">
    @for (e of dataSource.data; track e.ticker) {
      <mat-card class="empresa-card" (click)="verDetalles(e)">
        <div class="card-header">
          <div class="ticker">{{ e.ticker }}</div>
          <div class="pais">{{ e.pais }}</div>
        </div>
        <h3 class="nombre">{{ e.nombre }}</h3>
        <p class="sector">{{ e.sector }}</p>

        <div class="precio-container">
          <span class="precio">{{ e.precio_actual | number:'1.2-2' }} {{ e.moneda }}</span>
        </div>

        <button mat-raised-button color="primary" class="detalle-btn">
          Ver Detalles
        </button>
      </mat-card>
    }
  </div>
}
